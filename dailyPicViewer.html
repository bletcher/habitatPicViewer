<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fish Data Visualizations | SHEDS</title>

  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700"  type="text/css">
  <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css"  type="text/css"> 
  <link rel="stylesheet" href="libs/landing-page/css/landing-page.css"  type="text/css">
  <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css"  type="text/css">

<!-- From bootstrap api -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>



  <style>
    body, h1, h2, h3, h4, h5, h6 {
      font-weight: 400;
      font-family: "Open Sans", Helvetica, Arial, sans-serif !important;
    }

    .top-section {
      background: #222;
      color: white;
    }
    
    .funding-section img {
      margin: 10px 25px 10px 25px;
    }


    div.tooltip {
      position: absolute;
      padding: 8px;
      font: 12px sans-serif;
      background: #C6C6C6;
      pointer-events: none;
      height: auto;
      width: 480px;
      text-align: center;
    }
    
    .object-fit_contain { object-fit: contain }
    
    img[class] { 
      width: 100%;
      height: 100%;
    }
    
    img2 {height:10%; width:10%; }
    
    .carousel-inner > .carousel-item > img,
    .carousel-inner > .carousel-item > a > img {
      width: 75%;
      margin: auto;
    }
    
    .carousel-indicators {
       display: inline-block;
       width: 80%;
       margin: auto;
    }
    
    .carousel-caption {top: 2px;}
    
  </style>
</head>
<body>

  <div style="border-bottom: 2px solid #e7e7e7;background:#f8f8f8">
    <div class="container">
      <div class="row" style="margin-top: 20px; margin-bottom: 20px">
        <div class="col-xs-12">
          <h1>Daily pictures viewer</h1>
        </div>
      </div>
    </div>
  </div>


  <div class="content-section-b top-section">
    <div class="container">
      <div class="col-xs-6 col-md-6">
  
  
        <div id="carousel_Sawmill" class="carousel slide" data-ride="carousel">
          
          <ol class="carousel-indicators">
          </ol>
          
          <div class="carousel-inner" role="listbox">
          </div>
      
          <a class="carousel-control-prev" href="#carousel_Sawmill" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carousel_Sawmill" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        
        </div>
      </div>
      
      
      <div class="col-xs-6 col-md-6">
        
        <svg width="500" height="300"></svg>  
      
      </div> 
      
    </div>
  </div>

  <div class="content-section-b">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-12">

          <h2>Sawmill River from the Montague Conservation Area bridge</h2>
          <div class="row" style="margin-top: 50px; margin-bottom: 20px">
            <div id="flickr-images_sawmill"></div>
          </div>  

        </div>
      </div>
    </div>
  </div>

  <div class="content-section-b top-section">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-12">

          <h2>Montague Conservation Area</h2>
          <div class="row" style="margin-top: 50px; margin-bottom: 20px">
            <div id="flickr-images_consArea"></div>
          </div>  

        </div>
      </div>
    </div>
  </div>


  <div class="content-section-b">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8">
          <h2>Project Team</h2>
          <p>Ben Letcher  </p>

        </div>
      </div>
    </div>
  </div>


  <footer>
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <p class="copyright text-muted">Copyright Â© 2017 SHEDS Development Team</p>
          <p class="copyright text-muted"><strong>Disclaimer:</strong> This web site (SHEDS) has not yet been approved by the U.S. Geological Survey (USGS). As such, it does not represent any official USGS finding or policy.</p>
        </div>
      </div>
    </div>
  </footer>

<script src="https://d3js.org/d3.v4.min.js"></script>

<script type='text/javascript' src="js/functionsDailyPic.js"></script>
<!-- 
<script src="/libs/jquery/dist/jquery.min.js"></script>
<script src="/libs/bootstrap/dist/js/bootstrap.min.js"></script> 
<script src="/libs/intro.js/minified/intro.min.js"></script>
-->

<script>

var state = {
 fileName: undefined,  
 caption: undefined,        
 currentDate: undefined,
 flowIn: undefined
}


  $(document).ready(function() {
    getImgs("72157681488505313","_sawmill"); 
    getImgs("72157681560511503","_consArea");
   
    $('#carousel_Sawmill').on('slide.bs.carousel', function (e) {
      var slideFrom = $(this).find('.active').index();
      var slideTo = $(e.relatedTarget).index();
      //console.log(slideFrom+' => '+slideTo);
      
      state.caption = $(e.relatedTarget).find('.carousel-caption').text();
      state.currentDate = Date.parse(state.caption);
      //console.log(state)
      
      transCircle(state.flowIn.filter(function(d){return d.date == state.currentDate}));
  //    console.log("filter",state.flowIn.filter(function(d){return d.date == state.currentDate}))
    });  
  }); 

  // Make the graph
  var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var parseTime = d3.timeParse("%d-%b-%y");
  
  var x = d3.scaleTime()
      .rangeRound([0, width]);
  
  var y = d3.scaleLinear()
      .rangeRound([height, 0]);
  
  var line = d3.line()
      .x(function(d) { return x(d.date); })
      .y(function(d) { return y(d.flow); });
  
  d3.csv("/data/swiftRiverFlow.csv", typeFlow, function(f) {

    state.flowIn = f;
    console.log(state);
 
  
    x.domain(d3.extent(state.flowIn, function(d) { return d.date; }));
    y.domain(d3.extent(state.flowIn, function(d) { return d.flow; }));
  
    g.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        .attr("stroke", "grey")
      .select(".domain")
        .remove();
  
    g.append("g")
        .call(d3.axisLeft(y))
        .attr("stroke", "grey")
      .append("text")
        .attr("fill", "lightgrey")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", "0.71em")
        .attr("text-anchor", "end")
        .attr("stroke", "grey")
        .text("Flow (cfs)");
  
    g.append("path")
        .datum(state.flowIn)
        .attr("fill", "none")
        .attr("stroke", "grey")
        .attr("stroke-linejoin", "round")
        .attr("stroke-linecap", "round")
        .attr("stroke-width", 1.5)
        .attr("d", line);
      
  });     


</script>

</body>
</html>

